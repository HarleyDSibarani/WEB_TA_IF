/*
 * jsCalendar v1.4.4-beta.20190212
 * 
 * 
 * MIT License
 * 
 * Copyright (c) 2018 Grammatopoulos Athanasios-Vasileios
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */

var jsCalendar=function(){function b(){0!==arguments.length&&this._construct(arguments)}b.version="v1.4.4-beta.20190212";b.prototype._construct=function(a){a=this._parseArguments(a);this._init(a.options);this._setTarget(a.target);this._initTarget();this._setDate(a.date);this._create();this._update()};b.prototype.languages={en:{months:"January February March April May June July August September October November December".split(" "),days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
_dateStringParser:function(a,c){return b._defaultDateStringParser(a,c,this)},_dayStringParser:function(a,c){return b._defaultDayStringParser(a,c,this)}}};b.prototype._init=function(a){this._elements={};this._events={};this._events.date=[];this._events.month=[];this._date=this._now=null;this._selected=[];this.language={};this._parseOptions(a)};b.prototype._parseArguments=function(a){var c={target:null,date:new Date,options:{}};if(0===a.length)throw Error("jsCalendar: No parameters were given.");if(1===
a.length)if(("object"===typeof HTMLElement?a[0]instanceof HTMLElement:a[0])&&"object"===typeof a[0]&&null!==a[0]&&1===a[0].nodeType&&"string"===typeof a[0].nodeName||"string"===typeof a[0])c.target=a[0];else{c.options=a[0];if("undefined"!==typeof a[0].target)c.target=a[0].target;else throw Error("jsCalendar: Not target was given.");"undefined"!==typeof a[0].date&&(c.date=a[0].date)}else c.target=a[0],2<=a.length&&(c.date=a[1]),3<=a.length&&(c.options=a[2]);return c};b.prototype._parseOptions=function(a){this._options=
{language:"en",zeroFill:!1,monthFormat:"month",dayFormat:"D",firstDayOfTheWeek:1,navigator:!0,navigatorPosition:"both",min:!1,max:!1,monthRenderHandler:!1,dayRenderHandler:!1,dateRenderHandler:!1};"undefined"!==typeof a.zeroFill&&(this._options.zeroFill="false"!==a.zeroFill&&a.zeroFill?!0:!1);"undefined"!==typeof a.monthFormat&&(this._options.monthFormat=a.monthFormat);"undefined"!==typeof a.dayFormat&&(this._options.dayFormat=a.dayFormat);"undefined"!==typeof a.navigator&&(this._options.navigator=
"false"!==a.navigator&&a.navigator?!0:!1);"undefined"!==typeof a.navigatorPosition&&(this._options.navigatorPosition=a.navigatorPosition);"string"===typeof a.language&&"undefined"!==typeof this.languages[a.language]&&(this._options.language=a.language);this.setLanguage(this._options.language);"undefined"!==typeof a.fdotw&&(a.firstDayOfTheWeek=a.fdotw);if("undefined"!==typeof a.firstDayOfTheWeek&&("number"===typeof a.firstDayOfTheWeek&&1<=a.firstDayOfTheWeek&&7>=a.firstDayOfTheWeek&&(this._options.firstDayOfTheWeek=
a.firstDayOfTheWeek),"string"===typeof a.firstDayOfTheWeek))if(a.firstDayOfTheWeek.match(/^[1-7]$/))this._options.firstDayOfTheWeek=parseInt(a.firstDayOfTheWeek,10);else if(this._options.firstDayOfTheWeek=this.language.days.indexOf(a.firstDayOfTheWeek)+1,1>this._options.firstDayOfTheWeek||7<this._options.firstDayOfTheWeek)this._options.firstDayOfTheWeek=1;"undefined"!==typeof a.min&&"false"!==a.min&&!1!==a.min&&(this._options.min=this._parseDate(a.min));"undefined"!==typeof a.max&&"false"!==a.max&&
!1!==a.max&&(this._options.max=this._parseDate(a.max));"undefined"!==typeof a.monthRenderHandler&&"function"===typeof a.monthRenderHandler&&(this._options.monthRenderHandler=a.monthRenderHandler);"undefined"!==typeof a.dayRenderHandler&&"function"===typeof a.dayRenderHandler&&(this._options.dayRenderHandler=a.dayRenderHandler);"undefined"!==typeof a.dateRenderHandler&&"function"===typeof a.dateRenderHandler&&(this._options.dateRenderHandler=a.dateRenderHandler)};b.prototype._setTarget=function(a){if(a=
this._getElement(a))this._target=a,(this._target_id=this._target.id)&&0<this._target_id.length&&(f["#"+this._target_id]=this);else throw Error("jsCalendar: Target was not found.");};b.prototype._getElement=function(a){if(!a)return null;if("string"===typeof a){if("#"===a[0])return document.getElementById(a.substring(1));if("."===a[0])return document.getElementsByClassName(a.substring(1))[0]}else if(a.tagName&&a.nodeName&&a.ownerDocument&&a.removeAttribute)return a;return null};b.prototype._initTarget=
function(){0<this._target.className.length&&(this._target.className+=" ");this._target.className+="jsCalendar";this._elements.table=document.createElement("table");this._elements.head=document.createElement("thead");this._elements.table.appendChild(this._elements.head);this._elements.body=document.createElement("tbody");this._elements.table.appendChild(this._elements.body);this._target.appendChild(this._elements.table)};b.prototype._isDateInRange=function(a){if(!1===this._options.min&&!1===this._options.max)return!0;
a=this._parseDate(a);return!1!==this._options.min&&this._options.min.getTime()>a.getTime()||!1!==this._options.max&&this._options.max.getTime()<a.getTime()?!1:!0};b.prototype._setDate=function(a){this._isDateInRange(a)&&(this._now=this._parseDate(a),this._date=new Date(this._now.getFullYear(),this._now.getMonth(),1))};b.prototype._parseDate=function(a){if("undefined"===typeof a||null===a||"now"===a)a=new Date;else if("string"===typeof a)if(a=a.replace(/-/g,"/").match(/^(\d{1,2})\/(\d{1,2})\/(\d{4,4})$/i),
null!==a){var c=parseInt(a[2],10)-1;a=new Date(a[3],c,a[1]);if(!a||a.getMonth()!==c)throw Error("jsCalendar: Date does not exist.");}else throw Error("jsCalendar: Failed to parse date.");else if("number"===typeof a)a=new Date(a);else if(!(a instanceof Date))throw Error("jsCalendar: Invalid date.");return new Date(a.getTime())};b.prototype._parseToDateString=function(a,c){var d=this.language;return c.replace(/(MONTH|month|MMM|mmm|mm|m|MM|M|DAY|day|DDD|ddd|dd|d|DD|D|YYYY|yyyy)/g,function(c){return d.dateStringParser(c,
a)})};b.prototype._getVisibleMonth=function(a){a="undefined"===typeof a?this._date:this._parseDate(a);var c=new Date(a.getTime());c.setDate(1);var d=c.getDay()-(this._options.firstDayOfTheWeek-1);0>d&&(d+=7);var b=this.language,h=this._options.monthFormat.replace(/(MONTH|month|MMM|mmm|##|#|YYYY|yyyy)/g,function(a){return b.dateStringParser(a,c)});a=this._getVisibleDates(a);var f=(new Date(c.getYear()+1900,c.getMonth()+1,0)).getDate(),g=-1;c.getYear()===this._now.getYear()&&c.getMonth()===this._now.getMonth()&&
(g=d+this._now.getDate()-1);return{name:h,days:a,start:d+1,current:g,end:d+f}};b.prototype._getVisibleDates=function(a){a="undefined"===typeof a?this._date:this._parseDate(a);var c=[],d=new Date(a.getTime());d.setDate(1);d.setHours(0,0,0,0);var b=d.getDay()-(this._options.firstDayOfTheWeek-1);0>b&&(b+=7);for(a=new Date(d.getTime());0<b;)a.setDate(a.getDate()-1),c.unshift(new Date(a.getTime())),b--;a=new Date(d.getTime());do c.push(new Date(a.getTime())),a.setDate(a.getDate()+1);while(1!==a.getDate());
for(d=42-c.length;0<d;)c.push(new Date(a.getTime())),a.setDate(a.getDate()+1),d--;return c};b.prototype._create=function(){var a,c,d=this;this._elements.created=!0;this._elements.headRows=[];for(a=0;2>a;a++)this._elements.headRows.push(document.createElement("tr")),this._elements.head.appendChild(this._elements.headRows[a]);a=document.createElement("th");a.setAttribute("colspan",7);this._elements.headRows[0].className="jsCalendar-title-row";this._elements.headRows[0].appendChild(a);this._elements.headLeft=
document.createElement("div");this._elements.headLeft.className="jsCalendar-title-left";a.appendChild(this._elements.headLeft);this._elements.month=document.createElement("div");this._elements.month.className="jsCalendar-title-name";a.appendChild(this._elements.month);this._elements.headRight=document.createElement("div");this._elements.headRight.className="jsCalendar-title-right";a.appendChild(this._elements.headRight);this._options.navigator&&(this._elements.navLeft=document.createElement("div"),
this._elements.navLeft.className="jsCalendar-nav-left",this._elements.navRight=document.createElement("div"),this._elements.navRight.className="jsCalendar-nav-right","left"===this._options.navigatorPosition?(this._elements.headLeft.appendChild(this._elements.navLeft),this._elements.headLeft.appendChild(this._elements.navRight)):("right"===this._options.navigatorPosition?this._elements.headRight.appendChild(this._elements.navLeft):this._elements.headLeft.appendChild(this._elements.navLeft),this._elements.headRight.appendChild(this._elements.navRight)),
this._elements.navLeft.addEventListener("click",function(a){d.previous();d._eventFire_monthChange(a,d._date)},!1),this._elements.navRight.addEventListener("click",function(a){d.next();d._eventFire_monthChange(a,d._date)},!1));this._elements.headRows[1].className="jsCalendar-week-days";a.className="jsCalendar-title";this._elements.days=[];for(a=0;7>a;a++)this._elements.days.push(document.createElement("th")),this._elements.headRows[1].appendChild(this._elements.days[this._elements.days.length-1]);
this._elements.bodyRows=[];this._elements.bodyCols=[];for(a=0;6>a;a++)for(this._elements.bodyRows.push(document.createElement("tr")),this._elements.body.appendChild(this._elements.bodyRows[a]),c=0;7>c;c++)this._elements.bodyCols.push(document.createElement("td")),this._elements.bodyRows[a].appendChild(this._elements.bodyCols[7*a+c]),this._elements.bodyCols[7*a+c].addEventListener("click",function(a){return function(c){d._eventFire_dateClick(c,d._active[a])}}(7*a+c),!1)};b.prototype._selectDates=function(a){a=
a.slice();for(var c=0;c<a.length;c++)a[c]=this._parseDate(a[c]),a[c].setHours(0,0,0,0),a[c]=a[c].getTime();for(c=a.length-1;0<=c;c--)0>this._selected.indexOf(a[c])&&this._selected.push(a[c])};b.prototype._unselectDates=function(a){a=a.slice();for(var c=0;c<a.length;c++)a[c]=this._parseDate(a[c]),a[c].setHours(0,0,0,0),a[c]=a[c].getTime();for(c=a.length-1;0<=c;c--){var d=this._selected.indexOf(a[c]);0<=d&&this._selected.splice(d,1)}};b.prototype._unselectAllDates=function(){for(;this._selected.length;)this._selected.pop()};
b.prototype._update=function(){var a=this._getVisibleMonth(this._date);this._active=a.days.slice();this._elements.month.textContent=a.name;for(var c=this._options.zeroFill?"0":"",d,b=a.days.length-1;0<=b;b--)d=a.days[b].getDate(),this._elements.bodyCols[b].textContent=10>d?c+d:d,0<=this._selected.indexOf(a.days[b].getTime())?this._elements.bodyCols[b].className="jsCalendar-selected":this._elements.bodyCols[b].removeAttribute("class");for(b=0;b<a.start-1;b++)this._elements.bodyCols[b].className="jsCalendar-previous";
0<=a.current&&(this._elements.bodyCols[a.current].className=0<this._elements.bodyCols[a.current].className.length?this._elements.bodyCols[a.current].className+" jsCalendar-current":"jsCalendar-current");for(b=a.end;b<a.days.length;b++)this._elements.bodyCols[b].className="jsCalendar-next";for(b=0;7>b;b++){var f=this;this._elements.days[b].textContent=this._options.dayFormat.replace(/(DAY|day|DDD|ddd|DD|dd|D)/g,function(a){return f.language.dayStringParser(a,(b+f._options.firstDayOfTheWeek-1)%7)})}this._options.monthRenderHandler&&
(c=a.days[a.start],this._elements.month.removeAttribute("style"),this._options.monthRenderHandler.call(this,c.getMonth(),this._elements.month,{start:new Date(c.getTime()),end:new Date(c.getFullYear(),c.getMonth()+1,0,23,59,59,999),numberOfDays:a.end-a.start+1}));if(this._options.dayRenderHandler)for(b=0;7>b;b++)this._elements.days[b].removeAttribute("style"),this._options.dayRenderHandler.call(this,(b+this._options.firstDayOfTheWeek-1)%7,this._elements.days[b],{position:b});if(this._options.dateRenderHandler)for(b=
0;b<a.days.length;b++)this._elements.bodyCols[b].removeAttribute("style"),this._options.dateRenderHandler.call(this,new Date(a.days[b].getTime()),this._elements.bodyCols[b],{isCurrent:a.current==b,isSelected:0<=this._selected.indexOf(a.days[b].getTime()),isPreviousMonth:b<a.start,isCurrentMonth:a.start<=b&&b<=a.end,isNextMonth:a.end<b,position:{x:b%7,y:Math.floor(b/7)}})};b.prototype.setMonthRenderHandler=function(a){this._options.monthRenderHandler="undefined"!==typeof a&&"function"===typeof a?a:
!1;this.refresh()};b.prototype.setDayRenderHandler=function(a){this._options.dayRenderHandler="undefined"!==typeof a&&"function"===typeof a?a:!1;this.refresh()};b.prototype.setDateRenderHandler=function(a){this._options.dateRenderHandler="undefined"!==typeof a&&"function"===typeof a?a:!1;this.refresh()};b.prototype._eventFire_dateClick=function(a,c){for(var b=0;b<this._events.date.length;b++)(function(b){setTimeout(function(){b(a,new Date(c.getTime()))},0)})(this._events.date[b])};b.prototype._eventFire_monthChange=
function(a,c){var b=new Date(c.getTime());b.setDate(1);for(var e=0;e<this._events.month.length;e++)(function(c){setTimeout(function(){c(a,new Date(b.getTime()))},0)})(this._events.month[e])};b.prototype.onDateClick=function(a){if("function"===typeof a)this._events.date.push(a);else throw Error("jsCalendar: Invalid callback function.");return this};b.prototype.onMonthChange=function(a){if("function"===typeof a)this._events.month.push(a);else throw Error("jsCalendar: Invalid callback function.");return this};
b.prototype.set=function(a){this._setDate(a);this.refresh();return this};b.prototype.min=function(a){this._options.min=a?this._parseDate(a):!1;this.refresh();return this};b.prototype.max=function(a){this._options.max=a?this._parseDate(a):!1;this.refresh();return this};b.prototype.refresh=function(a){"undefined"!==typeof a&&this._isDateInRange(a)&&(this._date=this._parseDate(a));!0===this._elements.created&&this._update();return this};b.prototype.next=function(a){"number"!==typeof a&&(a=1);a=new Date(this._date.getFullYear(),
this._date.getMonth()+a,1);if(!this._isDateInRange(a))return this;this._date=a;this.refresh();return this};b.prototype.previous=function(a){"number"!==typeof a&&(a=1);a=new Date(this._date.getFullYear(),this._date.getMonth()-a+1,0);if(!this._isDateInRange(a))return this;this._date=a;this.refresh();return this};b.prototype["goto"]=function(a){this.refresh(a);return this};b.prototype.reset=function(){this.refresh(this._now);return this};b.prototype.select=function(a){if("undefined"===typeof a)return this;
a instanceof Array||(a=[a]);this._selectDates(a);this.refresh();return this};b.prototype.unselect=function(a){if("undefined"===typeof a)return this;a instanceof Array||(a=[a]);this._unselectDates(a);this.refresh();return this};b.prototype.clearselect=function(){this._unselectAllDates();this.refresh();return this};b.prototype.clearSelected=b.prototype.clearselect;b.prototype.getSelected=function(a){"object"!==typeof a&&(a={});var c=this._selected.slice();a.sort&&(!0===a.sort?c.sort():"string"===typeof a.sort&&
("asc"===a.sort.toLowerCase()?c.sort():"desc"===a.sort.toLowerCase()&&(c.sort(),c.reverse())));if(a.type&&"string"===typeof a.type){var b;if("date"===a.type.toLowerCase())for(b=c.length-1;0<=b;b--)c[b]=new Date(c[b]);else if("timestamp"!==a.type.toLowerCase())for(b=c.length-1;0<=b;b--)c[b]=this._parseToDateString(new Date(c[b]),a.type)}return c};b.prototype.isSelected=function(a){if("undefined"===typeof a||null===a)return!1;a=this._parseDate(a);a.setHours(0,0,0,0);a=a.getTime();return 0<=this._selected.indexOf(a)?
!0:!1};b.prototype.isVisible=function(a){if("undefined"===typeof a||null===a)return!1;a=this._parseDate(a);a.setHours(0,0,0,0);a=a.getTime();var c=this._getVisibleDates();return c[0].getTime()<=a&&c[c.length-1].getTime()>=a?!0:!1};b.prototype.isInMonth=function(a){if("undefined"===typeof a||null===a)return!1;a=this._parseDate(a);a.setHours(0,0,0,0);a.setDate(1);var c=this._parseDate(this._date);c.setHours(0,0,0,0);c.setDate(1);return a.getTime()===c.getTime()?!0:!1};b.prototype.setLanguage=function(a){if("string"!==
typeof a)throw Error("jsCalendar: Invalid language code.");if("undefined"===typeof this.languages[a])throw Error("jsCalendar: Language not found.");this._options.language=a;a=this.languages[a];this.language.months=a.months;this.language.days=a.days;this.language.dateStringParser=a._dateStringParser;this.language.dayStringParser=a._dayStringParser;this.refresh();return this};b.autoFind=function(){for(var a=document.getElementsByClassName("auto-jsCalendar"),c,b=0;b<a.length;b++)if("true"!==a[b].getAttribute("jsCalendar-loaded")){a[b].setAttribute("jsCalendar-loaded",
"true");c={};for(var e in a[b].dataset)c[e]=a[b].dataset[e];c.target=a[b];new jsCalendar(c)}};b.tools={};b.tools.parseDate=function(){return b.prototype._parseDate.apply({},arguments)};b.tools.stringToDate=b.tools.parseDate;b.tools.dateToString=function(a,c,d){var e=b.prototype.languages;d&&e.hasOwnProperty(d)||(d="en");return b.prototype._parseToDateString.apply({language:{months:e[d].months,days:e[d].days,dateStringParser:e[d]._dateStringParser,dayStringParser:e[d]._dayStringParser}},[a,c])};b["new"]=
function(){var a=new b;a._construct(arguments);return a};var f={};b.set=function(a,b){if(b instanceof jsCalendar)return f[a]=b,!0;throw Error("jsCalendar: The second parameter is not a jsCalendar.");};b.get=function(a){return f.hasOwnProperty(a)?f[a]:null};b.del=function(a){return f.hasOwnProperty(a)?(delete f[a],!0):!1};b.addLanguage=function(a){if("undefined"===typeof a)throw Error("jsCalendar: No language object was given.");if("string"!==typeof a.code)throw Error("jsCalendar: Invalid language code.");
if(!(a.months instanceof Array))throw Error("jsCalendar: Invalid language months.");if(12!==a.months.length)throw Error("jsCalendar: Invalid language months length.");if(!(a.days instanceof Array))throw Error("jsCalendar: Invalid language days.");if(7!==a.days.length)throw Error("jsCalendar: Invalid language days length.");b.prototype.languages[a.code]=a;a._dateStringParser=a.hasOwnProperty("dateStringParser")?function(c,d){return a.dateStringParser(c,d)||b._defaultDateStringParser(c,d,a)}:function(c,
d){return b._defaultDateStringParser(c,d,a)};a._dayStringParser=a.hasOwnProperty("dayStringParser")?function(c,d){return a.dayStringParser(c,d)||b._defaultDayStringParser(c,d,a)}:function(c,d){return b._defaultDayStringParser(c,d,a)}};b._defaultDateStringParser=function(a,b,d){switch(a){case "MONTH":case "month":return d.months[b.getMonth()];case "MMM":case "mmm":return d.months[b.getMonth()].substring(0,3);case "mm":return d.months[b.getMonth()].substring(0,2);case "m":return d.months[b.getMonth()].substring(0,
1);case "MM":return(9>b.getMonth()?"0":"")+(b.getMonth()+1);case "M":return b.getMonth()+1;case "##":return(9>b.getMonth()?"0":"")+(b.getMonth()+1);case "#":return b.getMonth()+1;case "DAY":case "day":return d.days[b.getDay()];case "DDD":case "ddd":return d.days[b.getDay()].substring(0,3);case "dd":return d.days[b.getDay()].substring(0,2);case "d":return d.days[b.getDay()].substring(0,1);case "DD":return(9>=b.getDate()?"0":"")+b.getDate();case "D":return b.getDate();case "YYYY":case "yyyy":return b.getYear()+
1900}};b._defaultDayStringParser=function(a,b,d){switch(a){case "DAY":case "day":return d.days[b];case "DDD":case "ddd":return d.days[b].substring(0,3);case "DD":case "dd":return d.days[b].substring(0,2);case "D":return d.days[b].substring(0,1)}};(function(){if("undefined"!==typeof window.jsCalendar_language2load){for(;window.jsCalendar_language2load.length;)setTimeout(function(a){return function(){b.addLanguage(a)}}(window.jsCalendar_language2load.pop()),0);delete window.jsCalendar_language2load}})();
return b}();(function(){window.addEventListener("load",function(){jsCalendar.autoFind()},!1)})();
